<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Comida ‚Äî NIKKEI 419</title>

  <!-- Fuente branding -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&display=swap" rel="stylesheet">

  <style>
  :root{
    --bg:#0a0a0a;
    --card:#121212;
    --line:#1f1f1f;
    --text:#f5f5f5;
    --muted:#cfcfcf;
    --accent:#f0b90b;
    --shadow:0 10px 30px rgba(0,0,0,.35);
    --radius:16px;
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    background:var(--bg);
    color:var(--text);
    font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial;
  }
  a{color:inherit;text-decoration:none}
  img{max-width:100%;display:block}

  /* T√çTULOS GENERALES */
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Cinzel', serif !important;
    letter-spacing: 1px;
    font-weight: 700;
    color: #ffffff;
    text-shadow: 0 0 6px rgba(240,185,11,0.18); /* brillo dorado sutil */
  }

  /* TARJETAS FULL WIDTH SI LAS USAS EN OTROS LUGARES */
  .dish-card, .item-card {
    width: 100%;
    max-width: 98%;
    margin: 0 auto 14px;
  }

  /* T√çTULOS DE SECCI√ìN CON PALITO AMARILLO */
  .section-title {
    font-family: 'Cinzel', serif;
    font-size: 26px;
    font-weight: 700;
    margin: 28px 0 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    color: #ffffff;
    letter-spacing: 1px;
  }
  .section-title::before {
    content: "";
    width: 6px;
    height: 28px;
    background: #f0b90b;
    border-radius: 3px;
  }

  /* Top bar */
 /* Top bar */
.top {
  position: sticky;
  top: 0;
  z-index: 30;
  background: rgba(10,10,10,0.88);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--line);
  height: 72px; /* ‚Üê hace m√°s alta toda la barra */
  display: flex;
  align-items: center; /* centra todo verticalmente */
}

/* Contenedor interno */
.wrap {
  max-width: 1000px;
  margin: 0 auto;
  width: 100%;
  padding: 0 20px; /* ‚Üê m√°s ancho a los lados */
  display: grid;
  grid-template-columns: 40px 1fr 40px;
  align-items: center;
  height: 100%; /* ‚Üê se adapta a la altura de .top */
}


  .menu-icon {
    border: none;
    background: transparent;
    color: #ffffff;
    font-size: 20px;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 0.9;
    transition: .2s;
  }
  .menu-icon:hover {
    opacity: 1;
    color: var(--accent);
  }

  .center-logo {
    display: flex;
    justify-content: center;
  }
  .center-logo img {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    object-fit: cover;
  }

  .back-icon {
    font-size: 22px;
    font-weight: 300; /* l√≠nea fina tipo referencia */
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    padding: 0;
    background: transparent;
    border: none;
    cursor: pointer;
    opacity: 0.9;
    transition: .2s;
  }
  .back-icon:hover {
    opacity: 1;
    color: var(--accent);
  }

  /* Page */
  .page{
    max-width:1200px;
    margin:0 auto;
    padding:14px 16px 32px;
  }
  h1{font-size:26px;margin:10px 0 4px}
  .sub{color:var(--muted);margin:0 0 14px;font-size:14px}

  /* BUSCADOR DESPLEGABLE */
  .search-box-hidden {
    display: none;
    padding: 10px 16px;
  }

  .search-input-full {
    width: 100%;
    padding: 10px 14px;
    font-size: 16px;
    border-radius: 12px;
    border: 1px solid var(--line);
    background: #121212;
    color: #fff;
  }

  /* BARRA DE CATEGOR√çAS TIPO LA BIRRA */
  .categories-bar {
    border-top: 1px solid #2a2a2a;
    border-bottom: 1px solid #2a2a2a;
    padding: 10px 0;
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 18px;
  }

  /* Lupa minimal fija */
  .search-icon-min {
    font-size: 18px;
    color: #ffffff;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    cursor: pointer;
    opacity: .85;
    transition: .2s;
  }
  .search-icon-min:hover {
    opacity: 1;
    color: var(--accent);
  }

  /* Scroll horizontal de categor√≠as */
  .categories-scroll {
    display: flex;
    gap: 18px;
    overflow-x: auto;
    white-space: nowrap;
    padding-right: 10px;
    scrollbar-width: none;
  }
  .categories-scroll::-webkit-scrollbar {
    display: none;
  }

  /* Textos blancos, sin fondo, para categor√≠as */
  .cat-item {
    color: #ffffff;
    font-size: 15px;
    font-weight: 500;
    cursor: pointer;
    transition: .2s;
    opacity: 0.8;
  }
  .cat-item:hover {
    opacity: 1;
    color: var(--accent);
  }
  .cat-item.active {
    opacity: 1;
    color: var(--accent);
    font-weight: 600;
  }

  /* Secciones */
  .list{display:grid;gap:12px}

  /* Cards */
  .card{
    position:relative;
    display:grid;
    grid-template-columns:120px 1fr;
    gap:12px;
    background:var(--card);
    border:1px solid var(--line);
    border-radius:18px;
    box-shadow:var(--shadow);
    overflow:hidden;
    cursor:pointer;
    transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
  }
  .card:hover{
    transform:translateY(-2px);
    border-color:var(--accent);
    box-shadow:0 14px 40px rgba(0,0,0,.55);
  }

  .photo{
    height:100px;
    background:#151515;
  }
  .photo img{
    width:100%;
    height:100%;
    object-fit:cover;
  }

  .body{
    padding:10px 12px 14px 12px;   /* un poquito m√°s abajo */
    padding-right: 80px;           /* espacio para que el texto no se choque con el precio */
    display:grid;
    grid-template-columns:1fr auto;
    gap:6px;
    align-items:flex-start;
  }

  .title{
    font-weight:700;
    font-size:15px;
    margin-bottom:6px;
  }
  .desc{
    color:var(--muted);
    margin:2px 0 0;
    font-size:13px;
  }
  .meta{
    display:flex;
    align-items:center;
    gap:10px;
    justify-self:end;
  }

  .price {
    position: absolute;
    bottom: 8px;        /* pegado al borde inferior */
    right: 12px;        /* pegado al borde derecho */
    font-size: 17px;
    font-weight: 700;
    color: #f0b90b;
    font-family: "Inter", sans-serif;
    letter-spacing: 0.3px;
  }
  .price::before{
    content:"$";
  }

  .add{
    width:28px;
    height:28px;
    border-radius:50%;
    display:grid;
    place-items:center;
    border:1px solid var(--accent);
    color:#111;
    background:var(--accent);
    font-weight:900;
    font-size:16px;
    cursor:pointer;
  }
  .add:active{transform:scale(.95)}

 @media (max-width:640px){

  /* M√°s ancho para foto */
  .card {
    grid-template-columns: 140px 1fr; /* aumenta el ancho de la imagen */
    min-height: 160px;                /* aumenta el alto del card */
    padding: 0;                       /* m√°s limpio */
  }

  /* Imagen m√°s alta */
  .photo {
    height: 160px; /* antes 100px */
  }

  /* Texto con m√°s aire */
  .body {
    padding: 14px 16px 18px 16px;
  }

  /* T√≠tulo m√°s grande */
  .title {
    font-size: 16px;
  }

  /* Descripci√≥n m√°s legible */
  .desc {
    font-size: 14px;
  }

  /* Precio m√°s grande */
  .price {
    font-size: 18px;
    bottom: 10px;
    right: 14px;
  }
}


  /* Modal con carrusel */
  .modal{
    position:fixed;
    inset:0;
    display:none;
    align-items:center;
    justify-content:center;
    z-index:50;
  }
  .modal.open{display:flex}
  .modal-backdrop{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,.75);
  }
  .modal-card{
    position:relative;
    background:#101010;
    border-radius:20px;
    border:1px solid var(--line);
    max-width:420px;
    width:90%;
    max-height:90vh;
    overflow-y:auto;
    box-shadow:0 18px 60px rgba(0,0,0,.8);
  }
  .carousel{position:relative}
  .modal-img{
    width:100%;
    height:230px;
    object-fit:cover;
    border-radius:20px 20px 0 0;
  }
  .car-btn{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    border:none;
    background:rgba(0,0,0,.55);
    color:#fff;
    width:32px;
    height:32px;
    border-radius:999px;
    display:grid;
    place-items:center;
    cursor:pointer;
    font-size:20px;
    z-index:3;
  }
  .car-btn.left{left:10px}
  .car-btn.right{right:10px}
  .dots{
    display:flex;
    justify-content:center;
    gap:6px;
    padding:6px 0 4px;
  }
  .dot{
    width:7px;
    height:7px;
    border-radius:999px;
    background:#444;
  }
  .dot.active{background:var(--accent)}

  .modal-body{padding:16px}
  .modal-title{font-size:20px;margin:0 0 4px}
  .modal-cat{
    font-size:12px;
    color:var(--muted);
    margin:0 0 10px;
    text-transform:uppercase;
    letter-spacing:.08em;
  }
  .modal-desc{
    font-size:14px;
    color:var(--muted);
    margin:0 0 8px;
  }
  .modal-detail{
    font-size:14px;
    margin:0 0 10px;
  }
  .modal-price{
    font-weight:800;
    font-size:16px;
    margin:4px 0 10px;
  }
  .modal-price::before{content:"$"}

  .modal-close{
    position:absolute;
    top:8px;
    right:10px;
    border:none;
    background:rgba(0,0,0,.75);
    color:#fff;
    font-size:20px;
    border-radius:999px;
    width:30px;
    height:30px;
    display:grid;
    place-items:center;
    cursor:pointer;
    z-index:4;
  }
</style>

</head>
<body>

  <!-- Top bar -->
  <div class="top">
    <div class="wrap">

      <!-- Bot√≥n men√∫ (3 l√≠neas) izquierda -->
      <button id="menu-btn" class="menu-icon">‚ò∞</button>

      <!-- Logo centrado -->
      <div class="center-logo">
        <img src="logo1.png" alt="Logo" />
      </div>

      <!-- Flecha volver (derecha) -->
      <a href="index.html" class="back-icon" aria-label="Volver">
        ‚Üí]
      </a>

    </div>
  </div>

  <main class="page">
    <h1>Nuestra carta</h1>
    <p class="sub">Busca y explora nuestra carta nikkei por categor√≠a.</p>

    <!-- BARRA DE CATEGOR√çAS TIPO LA BIRRA -->
    <div class="categories-bar">
      <!-- Lupa fija a la izquierda -->
      <button class="search-icon-min" id="openSearch">üîç</button>

      <!-- T√≠tulos en texto blanco, scroll horizontal -->
      <div class="categories-scroll">
        <span class="cat-item active" data-target="appetizer">Appetizer</span>
        <span class="cat-item" data-target="ceviches">Ceviches</span>
        <span class="cat-item" data-target="sashimi">Sashimi</span>
        <span class="cat-item" data-target="omakase">Omakase</span>
        <span class="cat-item" data-target="makimono">Makimono</span>
        <span class="cat-item" data-target="rolls-gourmet">Rolls gourmet</span>
        <span class="cat-item" data-target="rolls-sin-arroz">Rolls sin arroz</span>
        <span class="cat-item" data-target="rolls-tradicionales">Rolls tradicionales</span>
        <span class="cat-item" data-target="platos-calientes">Platos calientes</span>
        <span class="cat-item" data-target="combinaciones">Combinaciones</span>
        <span class="cat-item" data-target="postres">Postres</span>
      </div>
    </div>

    <!-- Buscador que se despliega al tocar la lupa -->
    <div id="searchBox" class="search-box-hidden">
      <input
        id="search"
        class="search-input-full"
        type="text"
        placeholder="Buscar plato o ingrediente‚Ä¶">
    </div>

    <!-- APPETIZER -->
    <section id="appetizer">
      <h2 class="section-title">Appetizer</h2>
      <div class="list">

        <article class="card"
          data-name="Gyozas de pollo"
          data-category="Appetizer"
          data-detail="Gyozas de pollo y verduras, cocinadas al vapor y luego selladas suavemente en salsa ponzu, finalizadas con un toque de ceboll√≠n fresco y semillas de s√©samo."
          data-img1="gyozas-pollo1.jpg"
          data-img2="gyozas-pollo2.jpg"
          data-img3="gyozas-pollo3.jpg"
        >
          <div class="photo">
            <img src="gyozas-pollo.jpg" alt="Gyozas de pollo">
          </div>
          <div class="body">
            <div>
              <div class="title">Gyozas de pollo</div>
              <p class="desc">Gyozas de pollo y verduras.</p>
            </div>
            <div class="meta">
              <div class="price">5900</div>
            </div>
          </div>
        </article>

        <article class="card"
          data-name="Gyozas de cerdo"
          data-category="Appetizer"
          data-detail="Gyozas de cerdo y verduras, cocinadas al vapor y luego selladas suavemente en salsa ponzu, finalizadas con un toque de ceboll√≠n fresco y semillas de s√©samo."
          data-img1="gyoza-cerdo1.jpg"
          data-img2="gyoza-cerdo2.jpg"
          data-img3="gyoza-cerdo3.jpg"
        >
          <div class="photo">
            <img src="gyoza-cerdo.jpg" alt="Gyozas de cerdo">
          </div>
          <div class="body">
            <div>
              <div class="title">Gyozas de cerdo</div>
              <p class="desc">Gyozas caseras de cerdo y verduras.</p>
            </div>
            <div class="meta">
              <div class="price">5900</div>
            </div>
          </div>
        </article>

        <article class="card"
          data-name="Gyozas de pollo"
          data-category="Appetizer"
          data-detail="Gyozas de pollo y verduras, cocinadas al vapor y luego selladas suavemente en salsa ponzu, finalizadas con un toque de ceboll√≠n fresco y semillas de s√©samo."
          data-img1="gyozas-pollo1.jpg"
          data-img2="gyozas-pollo2.jpg"
          data-img3="gyozas-pollo3.jpg"
        >
          <div class="photo">
            <img src="gyozas-pollo.jpg" alt="Gyozas de pollo">
          </div>
          <div class="body">
            <div>
              <div class="title">Gyozas de pollo</div>
              <p class="desc">Gyozas de pollo y verduras.</p>
            </div>
            <div class="meta">
              <div class="price">5900</div>
            </div>
          </div>
        </article>

        <article class="card"
          data-name="Gyozas de pollo"
          data-category="Appetizer"
          data-detail="Gyozas de pollo y verduras, cocinadas al vapor y luego selladas suavemente en salsa ponzu, finalizadas con un toque de ceboll√≠n fresco y semillas de s√©samo."
          data-img1="gyozas-pollo1.jpg"
          data-img2="gyozas-pollo2.jpg"
          data-img3="gyozas-pollo3.jpg"
        >
          <div class="photo">
            <img src="gyozas-pollo.jpg" alt="Gyozas de pollo">
          </div>
          <div class="body">
            <div>
              <div class="title">Gyozas de pollo</div>
              <p class="desc">Gyozas de pollo y verduras.</p>
            </div>
            <div class="meta">
              <div class="price">5900</div>
            </div>
          </div>
        </article>

      </div>
    </section>

    <!-- CEVICHES -->
    <section id="ceviches">
      <h2 class="section-title">Ceviches</h2>
      <div class="list">
        <article class="card"
          data-name="Ceviche Nikkei"
          data-category="Ceviches"
          data-detail="Cubos de pescado blanco, leche de tigre estilo nikkei, aj√≠ amarillo, cilantro, cebolla morada y chips de camote."
          data-img1="ceviche1.jpg"
          data-img2="ceviche2.jpg"
          data-img3="ceviche3.jpg"
        >
          <div class="photo">
            <img src="ceviche-list.jpg" alt="Ceviche Nikkei">
          </div>
          <div class="body">
            <div>
              <div class="title">Ceviche Nikkei</div>
              <p class="desc">Pescado blanco fresco en leche de tigre nikkei.</p>
            </div>
            <div class="meta">
              <div class="price">10900</div>
              <button class="add" aria-label="Agregar Ceviche Nikkei" onclick="event.stopPropagation()">+</button>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- SASHIMI -->
    <section id="sashimi">
      <h2 class="section-title">Sashimi</h2>
      <div class="list">
        <article class="card"
          data-name="Sashimi mix"
          data-category="Sashimi"
          data-detail="Selecci√≥n de cortes de salm√≥n, at√∫n y pescado blanco, acompa√±ados de salsa ponzu y wasabi."
          data-img1="sashimi1.jpg"
          data-img2="sashimi2.jpg"
          data-img3="sashimi3.jpg"
        >
          <div class="photo">
            <img src="sashimi-list.jpg" alt="Sashimi mix">
          </div>
          <div class="body">
            <div>
              <div class="title">Sashimi mix</div>
              <p class="desc">Cortes de salm√≥n, at√∫n y pesca del d√≠a.</p>
            </div>
            <div class="meta">
              <div class="price">11900</div>
              <button class="add" aria-label="Agregar Sashimi mix" onclick="event.stopPropagation()">+</button>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- OMAKASE -->
    <section id="omakase">
      <h2 class="section-title">Omakase</h2>
      <div class="list">
        <article class="card"
          data-name="Omakase del chef"
          data-category="Omakase"
          data-detail="Selecci√≥n sorpresa del chef con sashimi, nigiri y rolls especiales seg√∫n temporada."
          data-img1="omakase1.jpg"
          data-img2="omakase2.jpg"
          data-img3="omakase3.jpg"
        >
          <div class="photo">
            <img src="omakase-list.jpg" alt="Omakase del chef">
          </div>
          <div class="body">
            <div>
              <div class="title">Omakase del chef</div>
              <p class="desc">Degustaci√≥n sorpresa seg√∫n temporada.</p>
            </div>
            <div class="meta">
              <div class="price">19900</div>
              <button class="add" aria-label="Agregar Omakase del chef" onclick="event.stopPropagation()">+</button>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- MAKIMONO -->
    <section id="makimono">
      <h2 class="section-title">Makimono</h2>
      <div class="list">
        <article class="card"
          data-name="Makimono Bataa"
          data-category="Makimono"
          data-detail="Roll relleno de tartar de at√∫n y camar√≥n tempurizado, envuelto en salm√≥n grillado con mantequilla batayaki, kimchi y cilantro."
          data-img1="bataa1.jpg"
          data-img2="bataa2.jpg"
          data-img3="bataa3.jpg"
        >
          <div class="photo">
            <img src="bataa-list.jpg" alt="Makimono Bataa">
          </div>
          <div class="body">
            <div>
              <div class="title">Makimono Bataa</div>
              <p class="desc">At√∫n y camar√≥n tempurizado, envuelto en salm√≥n grillado con batayaki.</p>
            </div>
            <div class="meta">
              <div class="price">10900</div>
              <button class="add" aria-label="Agregar Makimono Bataa" onclick="event.stopPropagation()">+</button>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- Secciones vac√≠as para completar despu√©s -->
    <section id="rolls-gourmet">
      <h2 class="section-title">Rolls gourmet</h2>
      <div class="list"></div>
    </section>

    <section id="rolls-sin-arroz">
      <h2 class="section-title">Rolls sin arroz</h2>
      <div class="list"></div>
    </section>

    <section id="rolls-tradicionales">
      <h2 class="section-title">Rolls tradicionales</h2>
      <div class="list"></div>
    </section>

    <section id="platos-calientes">
      <h2 class="section-title">Platos calientes</h2>
      <div class="list"></div>
    </section>

    <section id="combinaciones">
      <h2 class="section-title">Combinaciones</h2>
      <div class="list"></div>
    </section>

    <section id="postres">
      <h2 class="section-title">Postres</h2>
      <div class="list"></div>
    </section>

  </main>

  <!-- MODAL CON CARRUSEL -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-card">
      <button type="button" class="modal-close" id="modalClose" aria-label="Cerrar">√ó</button>

      <div class="carousel">
        <button class="car-btn left" id="carPrev" aria-label="Foto anterior">‚Äπ</button>
        <img src="" alt="" class="modal-img" id="modalImg">
        <button class="car-btn right" id="carNext" aria-label="Foto siguiente">‚Ä∫</button>
      </div>
      <div class="dots" id="dots"></div>

      <div class="modal-body">
        <p class="modal-cat" id="modalCat"></p>
        <h2 class="modal-title" id="modalTitle"></h2>
        <p class="modal-desc" id="modalDesc"></p>
        <p class="modal-detail" id="modalDetail"></p>
        <p class="modal-price" id="modalPrice"></p>
      </div>
    </div>
  </div>

  <!-- SCRIPTS -->
 <script>
  // =============================
  // SECCIONES + BUSCADOR
  // =============================
  const openSearch  = document.getElementById('openSearch');
  const searchBox   = document.getElementById('searchBox');
  const searchInput = document.getElementById('search');
  const cards       = Array.from(document.querySelectorAll('.card'));
  const sections    = Array.from(document.querySelectorAll('main section'));

  // Al cargar: solo APPETIZER visible
  sections.forEach(sec => {
    if (sec.id !== 'appetizer') sec.style.display = 'none';
  });

  function mostrarSeccion(id) {
    sections.forEach(sec => {
      sec.style.display = (sec.id === id ? '' : 'none');
    });
  }

  // Abrir / cerrar cuadro de b√∫squeda al tocar la lupa
  if (openSearch && searchBox) {
    openSearch.addEventListener('click', () => {
      const visible = searchBox.style.display === 'block';
      searchBox.style.display = visible ? 'none' : 'block';
      if (!visible && searchInput) {
        searchInput.focus();
      }
    });
  }

  // B√∫squeda de platos
  if (searchInput) {
    searchInput.addEventListener('input', () => {
      const q = searchInput.value.toLowerCase().trim();

      if (q.length > 0) {
        // Mientras se busca, mostrar todas las secciones
        sections.forEach(sec => sec.style.display = '');
      } else {
        // Sin texto: volvemos a la categor√≠a activa
        const activeCat = document.querySelector('.cat-item.active');
        if (activeCat && activeCat.dataset.target) {
          mostrarSeccion(activeCat.dataset.target);
        }
      }

      cards.forEach(card => {
        const name   = (card.dataset.name || '').toLowerCase();
        const descEl = card.querySelector('.desc');
        const desc   = descEl ? descEl.textContent.toLowerCase() : '';
        const match  = !q || name.includes(q) || desc.includes(q);
        card.style.display = match ? '' : 'none';
      });
    });
  }

  // =============================
  // CATEGOR√çAS (barra tipo La Birra)
  // =============================
  const catItems = document.querySelectorAll('.cat-item');

  catItems.forEach(item => {
    item.addEventListener('click', () => {
      // estado activo visual
      catItems.forEach(i => i.classList.remove('active'));
      item.classList.add('active');

      // mostrar solo la secci√≥n correspondiente
      const id = item.dataset.target;
      if (id) {
        mostrarSeccion(id);
      }

      // volver arriba
      window.scrollTo({ top: 0, behavior: 'smooth' });

      // limpiar b√∫squeda y mostrar todas las cards
      if (searchInput) {
        searchInput.value = '';
      }
      cards.forEach(card => card.style.display = '');
    });
  });

  // =============================
  // MODAL + CARRUSEL
  // =============================
  const modal       = document.getElementById('modal');
  const modalImg    = document.getElementById('modalImg');
  const modalTitle  = document.getElementById('modalTitle');
  const modalCat    = document.getElementById('modalCat');
  const modalDesc   = document.getElementById('modalDesc');
  const modalDetail = document.getElementById('modalDetail');
  const modalPrice  = document.getElementById('modalPrice');
  const modalClose  = document.getElementById('modalClose');
  const carPrev     = document.getElementById('carPrev');
  const carNext     = document.getElementById('carNext');
  const dotsContainer = document.getElementById('dots');

  let currentImages = [];
  let currentIndex  = 0;

  function renderCarousel(){
    if (!currentImages.length || !modalImg) return;
    modalImg.src = currentImages[currentIndex];

    if (!dotsContainer) return;
    dotsContainer.innerHTML = '';
    currentImages.forEach((_, i) => {
      const d = document.createElement('div');
      d.className = 'dot' + (i === currentIndex ? ' active' : '');
      d.addEventListener('click', () => {
        currentIndex = i;
        renderCarousel();
      });
      dotsContainer.appendChild(d);
    });
  }

  function openModalFromCard(card){
    if (!modal) return;

    const name   = card.dataset.name || card.querySelector('.title')?.textContent || '';
    const cat    = card.dataset.category || '';
    const desc   = card.querySelector('.desc')?.textContent || '';
    const detail = card.dataset.detail || '';
    const price  = card.querySelector('.price')?.textContent || '';

    currentImages = [card.dataset.img1, card.dataset.img2, card.dataset.img3].filter(Boolean);
    currentIndex  = 0;
    renderCarousel();

    if (modalTitle)  modalTitle.textContent  = name;
    if (modalCat)    modalCat.textContent    = cat;
    if (modalDesc)   modalDesc.textContent   = desc;
    if (modalDetail) modalDetail.textContent = detail;
    if (modalPrice)  modalPrice.textContent  = price;

    modal.classList.add('open');
    modal.setAttribute('aria-hidden','false');
  }

  // Abrir modal al hacer click en una card (excepto bot√≥n +)
  cards.forEach(card => {
    card.addEventListener('click', (e) => {
      if (e.target.closest('.add')) return; // el + no abre modal
      openModalFromCard(card);
    });
  });

  function closeModal(){
    if (!modal) return;
    modal.classList.remove('open');
    modal.setAttribute('aria-hidden','true');
  }

  // Cerrar con la X
  if (modalClose) {
    modalClose.addEventListener('click', (e)=>{
      e.stopPropagation();
      closeModal();
    });
  }

  // Cerrar clic en fondo oscuro
  if (modal) {
    modal.addEventListener('click', (e) => {
      if (e.target.classList && e.target.classList.contains('modal-backdrop')) {
        closeModal();
      }
    });
  }

  // Cerrar con Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
  });

  // Carrusel: anterior / siguiente
  function goPrev(){
    if (!currentImages.length) return;
    currentIndex = (currentIndex - 1 + currentImages.length) % currentImages.length;
    renderCarousel();
  }

  function goNext(){
    if (!currentImages.length) return;
    currentIndex = (currentIndex + 1) % currentImages.length;
    renderCarousel();
  }

  if (carPrev) {
    carPrev.addEventListener('click', (e)=>{
      e.stopPropagation();
      goPrev();
    });
  }

  if (carNext) {
    carNext.addEventListener('click', (e)=>{
      e.stopPropagation();
      goNext();
    });
  }

  // Swipe en celular (deslizar imagen)
  let touchStartX = 0;
  let touchEndX   = 0;

  if (modalImg) {
    modalImg.addEventListener('touchstart', (e) => {
      if (!e.touches || !e.touches.length) return;
      touchStartX = e.touches[0].clientX;
    }, { passive: true });

    modalImg.addEventListener('touchend', (e) => {
      if (!e.changedTouches || !e.changedTouches.length) return;
      touchEndX = e.changedTouches[0].clientX;
      const diff = touchEndX - touchStartX;

      const threshold = 40;
      if (Math.abs(diff) > threshold) {
        if (diff < 0) {
          goNext();   // swipe izquierda ‚Üí siguiente
        } else {
          goPrev();   // swipe derecha ‚Üí anterior
        }
      }
    }, { passive: true });
  }
</script>


</body>
</html>
